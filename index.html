<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®æ¾œç ”ç©¶ | é¦–å¸­ç»æµå­¦å®¶æ´ªçå®è§‚ä¼°å€¼å¹³å°</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-main: #f8f9fc;
            --bg-card: #ffffff;
            --text-primary: #1a1a2e;
            --text-secondary: #4a4a68;
            --text-muted: #8888a0;
            --border: #e8e8f0;
            --accent: #4f46e5;
            --accent-light: #818cf8;
            --us-color: #3b82f6;
            --cn-color: #ef4444;
            --up: #10b981;
            --down: #ef4444;
            --shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            font-size: 13px;
            line-height: 1.5;
        }
        .header {
            background: var(--bg-card);
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo-mark {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        .header-info {
            display: flex;
            gap: 20px;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
        }
        .data-source {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #f0f4ff;
            border-radius: 4px;
            color: var(--accent);
            font-weight: 500;
        }
        .status {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--up);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .container { max-width: 1400px; margin: 0 auto; padding: 16px; }
        .nav {
            display: flex;
            gap: 4px;
            background: var(--bg-card);
            padding: 6px;
            border-radius: 10px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            overflow-x: auto;
        }
        .nav-btn {
            padding: 10px 18px;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-secondary);
            white-space: nowrap;
            transition: all 0.2s;
        }
        .nav-btn:hover { background: var(--bg-main); }
        .nav-btn.active { background: var(--accent); color: white; }
        .page { display: none; }
        .page.active { display: block; }
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 10px;
        }
        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .card-title-icon {
            width: 24px;
            height: 24px;
            background: var(--bg-main);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .time-toggle {
            display: flex;
            gap: 4px;
            background: var(--bg-main);
            padding: 4px;
            border-radius: 6px;
        }
        .time-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            color: var(--text-secondary);
            transition: all 0.2s;
        }
        .time-btn:hover { background: white; }
        .time-btn.active { background: var(--accent); color: white; }
        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 14px;
            margin-bottom: 16px;
        }
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 14px;
            margin-bottom: 16px;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
            margin-bottom: 16px;
        }
        .metric-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 14px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        .metric-title { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
        .metric-country {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 500;
        }
        .country-us { background: #eff6ff; color: var(--us-color); }
        .country-cn { background: #fef2f2; color: var(--cn-color); }
        .metric-value { font-size: 22px; font-weight: 700; color: var(--text-primary); margin: 6px 0; }
        .metric-unit { font-size: 11px; color: var(--text-muted); margin-left: 2px; }
        .metric-change { font-size: 12px; display: flex; align-items: center; gap: 4px; }
        .metric-arrow { font-weight: 700; }
        .up { color: var(--up); }
        .down { color: var(--down); }
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
        }
        .stock-card {
            background: var(--bg-main);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .stock-card:hover { border-color: var(--accent); background: white; }
        .stock-symbol { font-weight: 600; font-size: 13px; color: var(--text-primary); }
        .stock-name { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
        .stock-price { font-size: 18px; font-weight: 700; margin: 8px 0 4px; }
        .stock-change { font-size: 12px; font-weight: 500; }
        .stock-pattern { font-size: 10px; padding: 3px 8px; border-radius: 4px; margin-top: 8px; display: inline-block; }
        .pattern-buy { background: #dcfce7; color: #166534; }
        .pattern-hold { background: #fef9c3; color: #854d0e; }
        .pattern-sell { background: #fee2e2; color: #991b1b; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .data-table th {
            text-align: left;
            padding: 10px 12px;
            background: var(--bg-main);
            color: var(--text-secondary);
            font-weight: 600;
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }
        .data-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }
        .data-table tbody tr:hover td { background: var(--bg-main); }
        .data-table .num { font-family: 'SF Mono', Monaco, monospace; text-align: right; }
        .source-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 3px;
            background: #f0f4ff;
            color: var(--accent);
            margin-left: 6px;
        }
        .chart-box { height: 280px; }
        .chart-box-lg { height: 320px; }
        .valuation-panel {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        .valuation-item { text-align: center; padding: 14px; background: var(--bg-main); border-radius: 8px; }
        .valuation-label { font-size: 11px; color: var(--text-muted); margin-bottom: 6px; }
        .valuation-value { font-size: 18px; font-weight: 700; color: var(--text-primary); }
        .valuation-status { font-size: 10px; margin-top: 4px; padding: 2px 6px; border-radius: 3px; }
        .status-cheap { background: #dcfce7; color: #166534; }
        .status-fair { background: #fef9c3; color: #854d0e; }
        .status-expensive { background: #fee2e2; color: #991b1b; }
        .insight-list { padding: 0; }
        .insight-item { padding: 12px 0; border-bottom: 1px solid var(--border); }
        .insight-item:last-child { border-bottom: none; }
        .insight-title { font-size: 13px; font-weight: 500; color: var(--text-primary); margin-bottom: 6px; }
        .insight-meta { font-size: 11px; color: var(--text-muted); display: flex; gap: 12px; align-items: center; }
        .insight-sentiment { font-size: 10px; padding: 2px 8px; border-radius: 3px; }
        .sentiment-bull { background: #dcfce7; color: #166534; }
        .sentiment-bear { background: #fee2e2; color: #991b1b; }
        .sentiment-neutral { background: #f3f4f6; color: #6b7280; }
        .timeline { position: relative; padding-left: 20px; }
        .timeline::before {
            content: '';
            position: absolute;
            left: 5px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }
        .timeline-item { position: relative; padding-bottom: 16px; }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 4px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent);
            border: 2px solid white;
        }
        .timeline-date { font-size: 11px; color: var(--text-muted); margin-bottom: 4px; }
        .timeline-content { font-size: 13px; color: var(--text-primary); }
        .cycle-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .cycle-card { padding: 16px; background: var(--bg-main); border-radius: 8px; text-align: center; }
        .cycle-name { font-size: 13px; font-weight: 600; margin-bottom: 8px; }
        .cycle-period { font-size: 20px; font-weight: 700; color: var(--accent); }
        .cycle-desc { font-size: 11px; color: var(--text-muted); margin-top: 6px; }
        .heatmap {
            display: grid;
            grid-template-columns: auto repeat(5, 1fr);
            gap: 2px;
            font-size: 11px;
        }
        .heatmap-cell { padding: 8px; text-align: center; border-radius: 4px; }
        .heatmap-header { background: var(--bg-main); font-weight: 600; color: var(--text-secondary); }
        .heatmap-label { background: var(--bg-main); font-weight: 500; text-align: left; padding-left: 10px; }
        .loading { display: flex; justify-content: center; align-items: center; height: 100px; color: var(--text-muted); }
        .spinner {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        @media (max-width: 1200px) {
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
            .valuation-panel { grid-template-columns: repeat(3, 1fr); }
        }
        @media (max-width: 768px) {
            .grid-4, .grid-3, .grid-2, .cycle-cards { grid-template-columns: 1fr; }
            .valuation-panel { grid-template-columns: repeat(2, 1fr); }
            .header { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-mark">ğŸ“ˆ</div>
            <span>å®æ¾œç ”ç©¶</span>
        </div>
        <div class="header-info">
            <div class="data-source">
                <span>ğŸ“Š</span>
                <span>æ•°æ®æ¥æº: FRED | Yahoo Finance | ä¸­å›½å›½å®¶ç»Ÿè®¡å±€</span>
            </div>
            <div class="status">
                <div class="status-dot"></div>
                <span id="updateTime">å®æ—¶æ›´æ–°</span>
            </div>
        </div>
    </header>

    <div class="container">
        <nav class="nav">
            <button class="nav-btn active" data-page="dashboard">ä»ªè¡¨ç›˜</button>
            <button class="nav-btn" data-page="us-economy">ç¾å›½ç»æµ</button>
            <button class="nav-btn" data-page="cn-economy">ä¸­å›½ç»æµ</button>
            <button class="nav-btn" data-page="stocks">è‚¡ç¥¨è¡Œæƒ…</button>
            <button class="nav-btn" data-page="valuation">ä¼°å€¼åˆ†æ</button>
            <button class="nav-btn" data-page="indicators">æŒ‡æ ‡å¯¹æ¯”</button>
            <button class="nav-btn" data-page="honghao-special">æ´ªçä¸“é¢˜</button>
            <button class="nav-btn" data-page="insights">æ´ªçè§‚ç‚¹</button>
            <button class="nav-btn" data-page="correlation">å…³è”åˆ†æ</button>
        </nav>

        <!-- ä»ªè¡¨ç›˜é¡µé¢ -->
        <div id="dashboard" class="page active">
            <div class="grid-4">
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ç¾å›½GDPç¯æ¯”æŠ˜å¹´ç‡</div><span class="metric-country country-us">ğŸ‡ºğŸ‡¸ ç¾å›½</span></div>
                    </div>
                    <div class="metric-value" id="usGdp">--<span class="metric-unit">ä¸‡äº¿ç¾å…ƒ</span></div>
                    <div class="metric-change" id="usGdpChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ç¾å›½CPIåŒæ¯”</div><span class="metric-country country-us">ğŸ‡ºğŸ‡¸ ç¾å›½</span></div>
                    </div>
                    <div class="metric-value" id="usCpi">--<span class="metric-unit">%</span></div>
                    <div class="metric-change" id="usCpiChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">è”é‚¦åŸºé‡‘åˆ©ç‡</div><span class="metric-country country-us">ğŸ‡ºğŸ‡¸ ç¾å›½</span></div>
                    </div>
                    <div class="metric-value" id="usFedRate">--<span class="metric-unit">%</span></div>
                    <div class="metric-change" id="usFedRateChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ç¾å›½å¤±ä¸šç‡</div><span class="metric-country country-us">ğŸ‡ºğŸ‡¸ ç¾å›½</span></div>
                    </div>
                    <div class="metric-value" id="usUnemployment">--<span class="metric-unit">%</span></div>
                    <div class="metric-change" id="usUnemploymentChange">--</div>
                </div>
            </div>
            <div class="grid-4">
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ä¸­å›½GDPåŒæ¯”</div><span class="metric-country country-cn">ğŸ‡¨ğŸ‡³ ä¸­å›½</span></div>
                    </div>
                    <div class="metric-value" id="cnGdp">--<span class="metric-unit">%</span></div>
                    <div class="metric-change" id="cnGdpChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ä¸­å›½CPIåŒæ¯”</div><span class="metric-country country-cn">ğŸ‡¨ğŸ‡³ ä¸­å›½</span></div>
                    </div>
                    <div class="metric-value" id="cnCpi">--<span class="metric-unit">%</span></div>
                    <div class="metric-change" id="cnCpiChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">äººæ°‘å¸æ±‡ç‡</div><span class="metric-country country-cn">ğŸ‡¨ğŸ‡³ ä¸­å›½</span></div>
                    </div>
                    <div class="metric-value" id="cnyRate">--<span class="metric-unit">CNY/USD</span></div>
                    <div class="metric-change" id="cnyRateChange">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <div><div class="metric-title">ä¸­å›½åˆ¶é€ ä¸šPMI</div><span class="metric-country country-cn">ğŸ‡¨ğŸ‡³ ä¸­å›½</span></div>
                    </div>
                    <div class="metric-value" id="cnPmi">--</div>
                    <div class="metric-change" id="cnPmiChange">--</div>
                </div>
            </div>
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>ç¾å›½GDP vs CPIèµ°åŠ¿<span class="source-badge">FRED</span></div>
                        <div class="time-toggle">
                            <button class="time-btn" data-chart="usGdp" data-period="1y">1å¹´</button>
                            <button class="time-btn" data-chart="usGdp" data-period="5y">5å¹´</button>
                            <button class="time-btn active" data-chart="usGdp" data-period="10y">10å¹´</button>
                            <button class="time-btn" data-chart="usGdp" data-period="50y">50å¹´</button>
                        </div>
                    </div>
                    <div id="usGdpChart" class="chart-box"></div>
</div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ’°</div>è”é‚¦åŸºé‡‘åˆ©ç‡ vs å¤±ä¸šç‡<span class="source-badge">FRED</span></div>
                        <div class="time-toggle">
                            <button class="time-btn" data-chart="usFed" data-period="1y">1å¹´</button>
                            <button class="time-btn" data-chart="usFed" data-period="5y">5å¹´</button>
                            <button class="time-btn active" data-chart="usFed" data-period="10y">10å¹´</button>
                            <button class="time-btn" data-chart="usFed" data-period="50y">50å¹´</button>
                        </div>
                    </div>
                    <div id="usFedChart" class="chart-box"></div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“ˆ</div>çƒ­é—¨è‚¡ç¥¨<span class="source-badge">Yahoo Finance</span><span style="margin-left: auto; font-size: 11px; color: var(--text-muted);">æ¯ç§’åˆ·æ–°</span></div>
                </div>
                <div class="stock-grid" id="stockPreview"></div>
            </div>
        </div>

        <!-- ç¾å›½ç»æµé¡µé¢ -->
        <div id="us-economy" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ‡ºğŸ‡¸</div>ç¾å›½å®è§‚ç»æµæ•°æ®æ˜ç»†<span class="source-badge">FRED</span></div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æŒ‡æ ‡åç§°</th><th>å½“å‰å€¼</th><th>å‰å€¼</th><th>ç¯æ¯”å˜åŒ–</th><th>åŒæ¯”å˜åŒ–</th><th>æ•°æ®é¢‘ç‡</th><th>æœ€æ–°æ—¥æœŸ</th>
                        </tr>
                    </thead>
                    <tbody id="usEconomyTable"><tr><td colspan="7" class="loading"><div class="spinner"></div></td></tr></tbody>
                </table>
            </div>
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“ˆ</div>åˆ¶é€ ä¸šPMI<span class="source-badge">FRED</span></div>
                        <div class="time-toggle">
                            <button class="time-btn" data-chart="pmi" data-period="1y">1å¹´</button>
                            <button class="time-btn" data-chart="pmi" data-period="5y">5å¹´</button>
                            <button class="time-btn active" data-chart="pmi" data-period="10y">10å¹´</button>
                            <button class="time-btn" data-chart="pmi" data-period="50y">50å¹´</button>
                        </div>
                    </div>
                    <div id="pmiChart" class="chart-box"></div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ’µ</div>ç¾å…ƒæŒ‡æ•°DXY<span class="source-badge">FRED</span></div>
                        <div class="time-toggle">
                            <button class="time-btn" data-chart="dxy" data-period="1y">1å¹´</button>
                            <button class="time-btn" data-chart="dxy" data-period="5y">5å¹´</button>
                            <button class="time-btn active" data-chart="dxy" data-period="10y">10å¹´</button>
                            <button class="time-btn" data-chart="dxy" data-period="50y">50å¹´</button>
                        </div>
                    </div>
                    <div id="dxyChart" class="chart-box"></div>
                </div>
            </div>
        </div>

        <!-- ä¸­å›½ç»æµé¡µé¢ -->
        <div id="cn-economy" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ‡¨ğŸ‡³</div>ä¸­å›½å®è§‚ç»æµæ•°æ®æ˜ç»†<span class="source-badge">ä¸­å›½å›½å®¶ç»Ÿè®¡å±€</span></div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æŒ‡æ ‡åç§°</th><th>å½“å‰å€¼</th><th>å‰å€¼</th><th>ç¯æ¯”å˜åŒ–</th><th>åŒæ¯”å˜åŒ–</th><th>æ•°æ®é¢‘ç‡</th><th>æœ€æ–°æ—¥æœŸ</th>
                        </tr>
                    </thead>
                    <tbody id="cnEconomyTable"><tr><td colspan="7" class="loading"><div class="spinner"></div></td></tr></tbody>
                </table>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>ä¸­å›½ä¸»è¦ç»æµæŒ‡æ ‡èµ°åŠ¿<span class="source-badge">Wind | å›½å®¶ç»Ÿè®¡å±€</span></div>
                    <div class="time-toggle">
                        <button class="time-btn" data-chart="cnMacro" data-period="1y">1å¹´</button>
                        <button class="time-btn" data-chart="cnMacro" data-period="5y">5å¹´</button>
                        <button class="time-btn active" data-chart="cnMacro" data-period="10y">10å¹´</button>
                        <button class="time-btn" data-chart="cnMacro" data-period="30y">30å¹´</button>
                    </div>
                </div>
                <div id="cnMacroChart" class="chart-box-lg"></div>
            </div>
        </div>

        <!-- è‚¡ç¥¨é¡µé¢ -->
        <div id="stocks" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ‡ºğŸ‡¸</div>NASDAQ 100æˆåˆ†è‚¡<span class="source-badge">Yahoo Finance</span></div>
                </div>
                <div class="stock-grid" id="nasdaqStocks"></div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ‡¨ğŸ‡³</div>å¯Œæ—¶A50æˆåˆ†è‚¡<span class="source-badge">ä¸œæ–¹è´¢å¯Œ</span></div>
                </div>
                <div class="stock-grid" id="a50Stocks"></div>
            </div>
        </div>

        <!-- ä¼°å€¼åˆ†æé¡µé¢ -->
        <div id="valuation" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>å¤šç»´åº¦ä¼°å€¼æŒ‡æ ‡<span class="source-badge">æ´ªçä¼°å€¼æ¨¡å‹</span></div>
                </div>
                <div class="valuation-panel" id="valuationPanel">
                    <div class="valuation-item">
                        <div class="valuation-label">å¸‚ç›ˆç‡ (PE TTM)</div>
                        <div class="valuation-value" id="peValue">--</div>
                        <div class="valuation-status status-fair" id="peStatus">åˆç†</div>
                    </div>
                    <div class="valuation-item">
                        <div class="valuation-label">å¸‚å‡€ç‡ (PB)</div>
                        <div class="valuation-value" id="pbValue">--</div>
                        <div class="valuation-status status-fair" id="pbStatus">åˆç†</div>
                    </div>
                    <div class="valuation-item">
                        <div class="valuation-label">è‚¡æ¯ç‡</div>
                        <div class="valuation-value" id="dividendValue">--</div>
                        <div class="valuation-status status-fair" id="dividendStatus">åˆç†</div>
                    </div>
                    <div class="valuation-item">
                        <div class="valuation-label">CAPMé¢„æœŸæ”¶ç›Š</div>
                        <div class="valuation-value" id="capmValue">--</div>
                        <div class="valuation-status status-fair" id="capmStatus">åˆç†</div>
                    </div>
                    <div class="valuation-item">
                        <div class="valuation-label">ä¼°å€¼ç»¼åˆè¯„åˆ†</div>
                        <div class="valuation-value" id="scoreValue">--</div>
                        <div class="valuation-status status-fair" id="scoreStatus">åˆç†</div>
                    </div>
                </div>
            </div>
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“ˆ</div>PEå†å²èµ°åŠ¿<span class="source-badge">Bloomberg</span></div>
                        <div class="time-toggle">
                            <button class="time-btn" data-chart="pe" data-period="1y">1å¹´</button>
                            <button class="time-btn" data-chart="pe" data-period="5y">5å¹´</button>
                            <button class="time-btn active" data-chart="pe" data-period="10y">10å¹´</button>
                            <button class="time-btn" data-chart="pe" data-period="50y">50å¹´</button>
                        </div>
                    </div>
                    <div id="peChart" class="chart-box"></div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>ä¼°å€¼åˆ†ä½<span class="source-badge">å†å²æ•°æ®</span></div>
                    </div>
                    <div id="percentileChart" class="chart-box"></div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“‹</div>è¯¦ç»†ä¼°å€¼æ•°æ®</div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>å¸‚åœº/æŒ‡æ•°</th><th class="num">PE</th><th class="num">PB</th><th class="num">PS</th><th class="num">EV/EBITDA</th><th class="num">è‚¡æ¯ç‡(%)</th><th class="num">ROE(%)</th><th>ä¼°å€¼çŠ¶æ€</th>
                        </tr>
                    </thead>
                    <tbody id="valuationTable"><tr><td colspan="8" class="loading"><div class="spinner"></div></td></tr></tbody>
                </table>
            </div>
        </div>

        <!-- æŒ‡æ ‡å¯¹æ¯”é¡µé¢ -->
        <div id="indicators" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>ä¸­ç¾æ¬§æ—¥å®è§‚æŒ‡æ ‡å¯¹æ¯”<span class="source-badge">FRED | ä¸­å›½å›½å®¶ç»Ÿè®¡å±€ | Eurostat | æ—¥æœ¬ç»Ÿè®¡å±€</span></div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æŒ‡æ ‡åç§°</th><th>ğŸ‡ºğŸ‡¸ ç¾å›½</th><th>ğŸ‡¨ğŸ‡³ ä¸­å›½</th><th>ğŸ‡ªğŸ‡º æ¬§ç›Ÿ</th><th>ğŸ‡¯ğŸ‡µ æ—¥æœ¬</th><th>æ•°æ®é¢‘ç‡</th><th>æ›´æ–°æ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>GDPåŒæ¯”(%)</td><td class="num" id="gdp-us">2.8</td><td class="num" id="gdp-cn">4.6</td><td class="num" id="gdp-eu">0.8</td><td class="num" id="gdp-jp">1.2</td><td>å­£åº¦</td><td>2025-01-15</td></tr>
                        <tr><td>CPIåŒæ¯”(%)</td><td class="num" id="cpi-us">2.9</td><td class="num" id="cpi-cn">1.4</td><td class="num" id="cpi-eu">2.2</td><td class="num" id="cpi-jp">2.4</td><td>æœˆåº¦</td><td>2025-01-15</td></tr>
                        <tr><td>åˆ¶é€ ä¸šPMI</td><td class="num" id="pmi-us">49.3</td><td class="num" id="pmi-cn">50.1</td><td class="num" id="pmi-eu">46.6</td><td class="num" id="pmi-jp">49.0</td><td>æœˆåº¦</td><td>2025-01-15</td></tr>
                        <tr><td>å¤±ä¸šç‡(%)</td><td class="num" id="unemp-us">4.1</td><td class="num" id="unemp-cn">5.2</td><td class="num" id="unemp-eu">6.5</td><td class="num" id="unemp-jp">2.5</td><td>æœˆåº¦</td><td>2025-01-15</td></tr>
                        <tr><td>å¤®è¡Œåˆ©ç‡(%)</td><td class="num" id="rate-us">4.25</td><td class="num" id="rate-cn">3.10</td><td class="num" id="rate-eu">4.50</td><td class="num" id="rate-jp">0.25</td><td>æŒ‰éœ€</td><td>2025-01-15</td></tr>
                        <tr><td>10Yå›½å€ºæ”¶ç›Šç‡(%)</td><td class="num" id="bond-us">4.65</td><td class="num" id="bond-cn">1.65</td><td class="num" id="bond-eu">2.35</td><td class="num" id="bond-jp">1.15</td><td>æ—¥åº¦</td><td>2025-01-15</td></tr>
                        <tr><td>è´§å¸ä¾›åº”M2åŒæ¯”(%)</td><td class="num" id="m2-us">1.2</td><td class="num" id="m2-cn">10.8</td><td class="num" id="m2-eu">3.5</td><td class="num" id="m2-jp">2.1</td><td>æœˆåº¦</td><td>2025-01-15</td></tr>
                        <tr><td>é›¶å”®é”€å”®åŒæ¯”(%)</td><td class="num" id="retail-us">3.5</td><td class="num" id="retail-cn">3.6</td><td class="num" id="retail-eu">0.8</td><td class="num" id="retail-jp">2.1</td><td>æœˆåº¦</td><td>2025-01-15</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“ˆ</div>æ´ªçå‘¨æœŸæŒ‡æ ‡ï¼šåº“å­˜å‘¨æœŸ<span class="source-badge">æ´ªçæ–¹æ³•è®º</span></div>
                    </div>
                    <div id="inventoryCycleChart" class="chart-box"></div>
                    <div style="margin-top: 12px; padding: 12px; background: var(--bg-main); border-radius: 8px; font-size: 12px;">
                        <strong>å‘¨æœŸè§£è¯»ï¼š</strong>å½“å‰å¤„äºåŸºé’¦å‘¨æœŸï¼ˆåº“å­˜å‘¨æœŸï¼‰çš„ä¸»åŠ¨å»åº“å­˜é˜¶æ®µå‘è¢«åŠ¨å»åº“å­˜è¿‡æ¸¡ï¼Œé¢„è®¡2026å¹´Q2è¿›å…¥ä¸»åŠ¨è¡¥åº“å­˜é˜¶æ®µã€‚
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ’°</div>æ´ªçå‘¨æœŸæŒ‡æ ‡ï¼šä¿¡ç”¨å‘¨æœŸ<span class="source-badge">æ´ªçæ–¹æ³•è®º</span></div>
                    </div>
                    <div id="creditCycleChart" class="chart-box"></div>
                    <div style="margin-top: 12px; padding: 12px; background: var(--bg-main); border-radius: 8px; font-size: 12px;">
                        <strong>å‘¨æœŸè§£è¯»ï¼š</strong>ä¸­å›½ç¤¾ä¼šèèµ„è§„æ¨¡å­˜é‡åŒæ¯”é¢†å…ˆGDPçº¦2ä¸ªå­£åº¦ã€‚å½“å‰ä¿¡ç”¨æ‰©å¼ å‘¨æœŸå¼€å¯ï¼Œé¢„ç¤ºç»æµå°†äº2026å¹´ä¸‹åŠå¹´ä¼ç¨³å›å‡ã€‚
                    </div>
                </div>
            </div>
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ”„</div>æ´ªçå‘¨æœŸæŒ‡æ ‡ï¼šç¾å…ƒå‘¨æœŸ<span class="source-badge">æ´ªçæ–¹æ³•è®º</span></div>
                    </div>
                    <div id="dollarCycleChart" class="chart-box"></div>
                    <div style="margin-top: 12px; padding: 12px; background: var(--bg-main); border-radius: 8px; font-size: 12px;">
                        <strong>å‘¨æœŸè§£è¯»ï¼š</strong>ç¾å…ƒå‘¨æœŸçº¦15-16å¹´ä¸€è½®ï¼Œå½“å‰å¤„äºå¼ºåŠ¿å‘¨æœŸæœ«æœŸã€‚ç¾å…ƒè§é¡¶å¾€å¾€ä¼´éšæ–°å…´å¸‚åœºè‚¡å¸‚è§åº•ã€‚
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>æ´ªçå‘¨æœŸæŒ‡æ ‡ï¼šåº·æ³¢å‘¨æœŸä½ç½®<span class="source-badge">æ´ªçæ–¹æ³•è®º</span></div>
                    </div>
                    <div id="kondratievChart" class="chart-box"></div>
                    <div style="margin-top: 12px; padding: 12px; background: var(--bg-main); border-radius: 8px; font-size: 12px;">
                        <strong>å‘¨æœŸè§£è¯»ï¼š</strong>åº·å¾·æ‹‰å­£è€¶å¤«å‘¨æœŸï¼ˆ54å¹´ï¼‰æ˜¾ç¤ºï¼Œ2025-2030å¹´å¤„äºè§æ¡æœŸå‘å¤è‹æœŸè¿‡æ¸¡ã€‚æ•°å­—ç»æµå°†é©±åŠ¨æ–°ä¸€è½®æŠ€æœ¯é©å‘½ã€‚
                    </div>
                </div>
            </div>
        </div>

        <!-- æ´ªçä¸“é¢˜é¡µé¢ -->
        <div id="honghao-special" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“š</div>æ´ªçè‡ªåª’ä½“è¨€è®ºæ±‡ç¼–<span class="source-badge">å¾®åš | å¾®ä¿¡å…¬ä¼—å· | Xå¹³å°</span></div>
                    <div style="display: flex; gap: 8px;">
                        <button class="time-btn active" data-view="summary">æ¦‚è¦ç‰ˆ</button>
                        <button class="time-btn" data-view="full">å®Œæ•´ç‰ˆ</button>
                    </div>
                </div>
                <div id="honghao-summary">
                    <div style="padding: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 8px;">ğŸ¯ æ´ªçæ ¸å¿ƒè§‚ç‚¹æ¦‚è¦</h3>
                        <ul style="list-style: none; padding: 0; line-height: 1.8;">
                            <li>âœ¦ <strong>å‘¨æœŸåˆ¤æ–­ï¼š</strong>2026å¹´å°†è¿æ¥ä¸‰é‡å‘¨æœŸå…±æŒ¯å‘ä¸Šï¼Œæ˜¯"æ”¹è¿é€†å‘½"çš„å…³é”®å¹´ä»½</li>
                            <li>âœ¦ <strong>å¸‚åœºè§‚ç‚¹ï¼š</strong>åšå®šçœ‹å¥½ä¸­å›½èµ„äº§ï¼ŒAè‚¡å·²å¤„äºæŠ€æœ¯æ€§ç‰›å¸‚</li>
                            <li>âœ¦ <strong>è¡Œä¸šé…ç½®ï¼š</strong>æ•°å­—ç»æµã€AIäº§ä¸šé“¾ã€é«˜ç«¯åˆ¶é€ å°†æ˜¯æ–°ä¸€è½®æŠ€æœ¯é©å‘½çš„èµ¢å®¶</li>
                            <li>âœ¦ <strong>é£é™©æç¤ºï¼š</strong>éœ€å…³æ³¨ç¾è”å‚¨é™æ¯èŠ‚å¥ã€åœ°ç¼˜æ”¿æ²»é£é™©</li>
                            <li>âœ¦ <strong>æŠ•èµ„ç­–ç•¥ï¼š</strong>é€†å‘æŠ•èµ„ï¼Œåœ¨å¸‚åœºææ…Œæ—¶å¸ƒå±€</li>
                        </ul>
                    </div>
                    <h4 style="margin: 20px 0 12px; font-size: 14px;">ğŸ“… å…³é”®æ—¶é—´èŠ‚ç‚¹é¢„æµ‹</h4>
                    <div class="timeline">
                        <div class="timeline-item"><div class="timeline-date">2026 Q1</div><div class="timeline-content">ç¾è”å‚¨å¤§æ¦‚ç‡é™æ¯ï¼Œç¾å…ƒç¡®è®¤é¡¶éƒ¨</div></div>
                        <div class="timeline-item"><div class="timeline-date">2026 Q2</div><div class="timeline-content">ä¸­å›½ä¸¤ä¼šæ”¿ç­–é‡Šæ”¾ï¼Œç»æµä¼ç¨³ä¿¡å·ç¡®è®¤</div></div>
                        <div class="timeline-item"><div class="timeline-date">2026 H2</div><div class="timeline-content">ç¾å›½å¤§é€‰ä¸ç¡®å®šæ€§è½åœ°ï¼Œå…¨çƒé£é™©åå¥½å›å‡</div></div>
                        <div class="timeline-item"><div class="timeline-date">2026å¹´åº•</div><div class="timeline-content">åº·æ³¢å‘¨æœŸæ‹ç‚¹ç¡®è®¤ï¼Œæ•°å­—ç»æµé©±åŠ¨æ–°ä¸€è½®æŠ€æœ¯é©å‘½</div></div>
                    </div>
                </div>
                <div id="honghao-full" style="display: none; max-height: 600px; overflow-y: auto;">
                    <h4 style="margin-bottom: 16px; font-size: 14px;">ğŸ“† 2026å¹´1æœˆ</h4>
                    <div class="insight-item">
                        <div class="insight-title">ä¸­å›½é¦–å¸­ç»æµå­¦å®¶è®ºå›å¹´ä¼šæ¼”è®²</div>
                        <div class="insight-meta"><span>2026-01-11</span><span>ä¸­å›½é¦–å¸­ç»æµå­¦å®¶è®ºå›</span></div>
                        <p style="margin-top: 8px; line-height: 1.6; color: var(--text-secondary);">æ´ªçåœ¨å¹´ä¼šä¸Šå‘è¡¨ä¸»æ—¨æ¼”è®²ï¼ŒæŒ‡å‡º2026å¹´å°†ä¸ºæŠ•èµ„è€…å¸¦æ¥"æ”¹è¿é€†å‘½"çš„æœºä¼šã€‚ä»–å¼ºè°ƒä¸‰é‡å‘¨æœŸå°†åœ¨2026å¹´å½¢æˆå…±æŒ¯å‘ä¸Šçš„å±€é¢ã€‚</p>
                    </div>
                    <h4 style="margin: 24px 0 16px; font-size: 14px;">ğŸ“† 2024å¹´12æœˆ</h4>
                    <div class="insight-item">
                        <div class="insight-title">"å¯»è®¿é‡‘é•¿æ±Ÿ"æ´»åŠ¨è®¿è°ˆ</div>
                        <div class="insight-meta"><span>2024-12-20</span><span>é•¿æ±Ÿè¯åˆ¸</span></div>
                        <p style="margin-top: 8px; line-height: 1.6; color: var(--text-secondary);">æ´ªçæ˜ç¡®è¡¨ç¤º"Aè‚¡å·²å¤„äºæŠ€æœ¯æ€§ç‰›å¸‚"ï¼Œæ²ªæ·±300æŒ‡æ•°å·²å½¢æˆå…¸å‹çš„"æ¯æŸ„"å½¢æ€ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ´ªçè§‚ç‚¹é¡µé¢ -->
        <div id="insights" class="page">
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ’¡</div>æ´ªçæœ€æ–°è§‚ç‚¹</div>
                    </div>
                    <div class="insight-list">
                        <div class="insight-item">
                            <div class="insight-title">2026å¹´å°†ä¸ºæŠ•èµ„è€…å¸¦æ¥"æ”¹è¿é€†å‘½"çš„æœºä¼š</div>
                            <div class="insight-meta"><span>2026-01-11</span><span>ä¸­å›½é¦–å¸­ç»æµå­¦å®¶è®ºå›å¹´ä¼š</span><span class="insight-sentiment sentiment-bull">çœ‹å¤š</span></div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">Aè‚¡å·²å¤„äºæŠ€æœ¯æ€§ç‰›å¸‚</div>
                            <div class="insight-meta"><span>2024-12-20</span><span>å¯»è®¿é‡‘é•¿æ±Ÿ</span><span class="insight-sentiment sentiment-bull">çœ‹å¤š</span></div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-title">ä¸çœ‹å¥½ç¾è‚¡ä½†æ˜¯çœ‹å¥½Aè‚¡</div>
                            <div class="insight-meta"><span>2024-11-15</span><span>è´¢ç»æ’­å®¢</span><span class="insight-sentiment sentiment-neutral">ä¸­æ€§</span></div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><div class="card-title-icon">ğŸ“…</div>å…³é”®æ—¶é—´èŠ‚ç‚¹</div>
                    </div>
                    <div class="timeline">
                        <div class="timeline-item"><div class="timeline-date">2026 Q1</div><div class="timeline-content">ç¾è”å‚¨åˆ©ç‡å†³è®® - å…³æ³¨é™æ¯èŠ‚å¥</div></div>
                        <div class="timeline-item"><div class="timeline-date">2026 Q2</div><div class="timeline-content">ä¸­å›½ä¸¤ä¼š - å…³æ³¨æ”¿ç­–åˆºæ¿€åŠ›åº¦</div></div>
                        <div class="timeline-item"><div class="timeline-date">2026 H2</div><div class="timeline-content">ç¾å›½å¤§é€‰ - å…³æ³¨è´¸æ˜“æ”¿ç­–èµ°å‘</div></div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ”„</div>ç»æµå‘¨æœŸç†è®ºæ¡†æ¶</div>
                </div>
                <div class="cycle-cards">
                    <div class="cycle-card">
                        <div class="cycle-name">åº·å¾·æ‹‰å­£è€¶å¤«å‘¨æœŸ</div>
                        <div class="cycle-period">54å¹´</div>
                        <div class="cycle-desc">å®è§‚ç»æµé•¿æ³¢å‘¨æœŸ<br>æŠ€æœ¯é©å‘½é©±åŠ¨</div>
                    </div>
                    <div class="cycle-card">
                        <div class="cycle-name">æœ±æ ¼æ‹‰å‘¨æœŸ</div>
                        <div class="cycle-period">8-10å¹´</div>
                        <div class="cycle-desc">è®¾å¤‡æŠ•èµ„å‘¨æœŸ<br>äº§èƒ½æ‰©å¼ ä¸æ”¶ç¼©</div>
                    </div>
                    <div class="cycle-card">
                        <div class="cycle-name">åŸºé’¦å‘¨æœŸ</div>
                        <div class="cycle-period">40ä¸ªæœˆ</div>
                        <div class="cycle-desc">åº“å­˜å‘¨æœŸ<br>3-5å¹´çŸ­å‘¨æœŸæ³¢åŠ¨</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å…³è”åˆ†æé¡µé¢ -->
        <div id="correlation" class="page">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ”—</div>èµ„äº§ä¸å®è§‚ç»æµç›¸å…³æ€§çŸ©é˜µ<span class="source-badge">Pearsonç›¸å…³ç³»æ•°</span></div>
                </div>
                <div class="heatmap">
                    <div class="heatmap-cell heatmap-header"></div>
                    <div class="heatmap-cell heatmap-header">æ ‡æ™®500</div>
                    <div class="heatmap-cell heatmap-header">çº³æŒ‡100</div>
                    <div class="heatmap-cell heatmap-header">10Yå›½å€º</div>
                    <div class="heatmap-cell heatmap-header">é»„é‡‘</div>
                    <div class="heatmap-cell heatmap-header">åŸæ²¹</div>
                    <div class="heatmap-cell heatmap-label">è”é‚¦åˆ©ç‡</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.6);">-0.45</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.5);">-0.38</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.8);">0.85</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.5);">0.42</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.3);">-0.15</div>
                    <div class="heatmap-cell heatmap-label">CPIé€šèƒ€</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.4);">-0.25</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.3);">-0.18</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.5);">-0.35</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.7);">0.68</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.4);">0.32</div>
                    <div class="heatmap-cell heatmap-label">GDPå¢é•¿</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.7);">0.72</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.8);">0.78</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.3);">0.22</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.2);">0.12</div>
                    <div class="heatmap-cell" style="background: rgba(102,187,106,0.5);">0.45</div>
                    <div class="heatmap-cell heatmap-label">å¤±ä¸šç‡</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.6);">-0.52</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.7);">-0.62</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.2);">-0.08</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.3);">-0.15</div>
                    <div class="heatmap-cell" style="background: rgba(239,83,80,0.4);">-0.28</div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><div class="card-title-icon">ğŸ“Š</div>å åŠ åˆ†æ<span class="source-badge">ç›¸å…³æ€§åˆ†æ</span></div>
                    <div class="time-toggle">
                        <button class="time-btn" data-chart="overlay" data-period="1y">1å¹´</button>
                        <button class="time-btn" data-chart="overlay" data-period="5y">5å¹´</button>
                        <button class="time-btn active" data-chart="overlay" data-period="10y">10å¹´</button>
                        <button class="time-btn" data-chart="overlay" data-period="50y">50å¹´</button>
                    </div>
                </div>
                <div id="overlayAnalysisChart" class="chart-box-lg"></div>
            </div>
        </div>
    </div>

    <script>
        const CONFIG = {
            fred: {
                baseUrl: 'https://api.stlouisfed.org/fred',
                apiKey: 'YOUR_FRED_API_KEY',
                series: {
                    GDP: { name: 'ç¾å›½GDPç¯æ¯”æŠ˜å¹´ç‡', unit: 'ä¸‡äº¿ç¾å…ƒ', frequency: 'å­£åº¦' },
                    CPI: { name: 'ç¾å›½CPIåŒæ¯”', unit: '%', frequency: 'æœˆåº¦' },
                    UNEMPLOYMENT: { name: 'ç¾å›½å¤±ä¸šç‡', unit: '%', frequency: 'æœˆåº¦' },
                    FED_RATE: { name: 'è”é‚¦åŸºé‡‘åˆ©ç‡', unit: '%', frequency: 'æœˆåº¦' },
                    PMI: { name: 'ç¾å›½åˆ¶é€ ä¸šPMI', unit: '', frequency: 'æœˆåº¦' },
                    PPI: { name: 'ç¾å›½PPIåŒæ¯”', unit: '%', frequency: 'æœˆåº¦' },
                    DXY: { name: 'ç¾å…ƒæŒ‡æ•°', unit: '', frequency: 'æ—¥åº¦' }
                }
            }
        };

        let macroData = {};
        let stockData = {};
        let charts = {};
        let chartPeriods = {
            usGdp: '10y', usFed: '10y', pmi: '10y', dxy: '10y', cnMacro: '10y', pe: '10y', overlay: '10y'
        };
        let updateIntervals = [];

        document.addEventListener('DOMContentLoaded', () => {
            initNavigation();
            initCharts();
            initTimeToggles();
            loadData();
            startUpdates();
        });

        function initNavigation() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.page).classList.add('active');
                    setTimeout(() => {
                        initPageCharts(btn.dataset.page);
                        Object.values(charts).forEach(chart => chart && chart.resize());
                    }, 100);
                });
            });
        }

        function initPageCharts(page) {
            if (page === 'indicators') {
                setTimeout(() => { updateCycleCharts(); }, 200);
            }
            switch(page) {
                case 'dashboard':
                    updateUsGdpChart(chartPeriods.usGdp || '10y');
                    updateUsFedChart(chartPeriods.usFed || '10y');
                    break;
                case 'us-economy':
                    updatePmiChart(chartPeriods.pmi || '10y');
                    updateDxyChart(chartPeriods.dxy || '10y');
                    break;
                case 'cn-economy':
                    updateCnMacroChart(chartPeriods.cnMacro || '10y');
                    break;
                case 'valuation':
                    updatePeChart(chartPeriods.pe || '10y');
                    break;
                case 'correlation':
                    updateOverlayChart(chartPeriods.overlay || '10y');
                    break;
            }
        }

        function initTimeToggles() {
            document.querySelectorAll('.time-toggle .time-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const parent = this.closest('.time-toggle');
                    parent.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const period = this.dataset.period;
                    const chartId = this.dataset.chart;
                    if (chartId) {
                        chartPeriods[chartId] = period;
                        updateChartByPeriod(chartId, period);
                    }
                });
            });
            document.querySelectorAll('#honghao-special .time-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#honghao-special .time-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById('honghao-summary').style.display = btn.dataset.view === 'summary' ? 'block' : 'none';
                    document.getElementById('honghao-full').style.display = btn.dataset.view === 'full' ? 'block' : 'none';
                });
            });
        }

        function updateChartByPeriod(chartId, period) {
            switch(chartId) {
                case 'usGdp': updateUsGdpChart(period); break;
                case 'usFed': updateUsFedChart(period); break;
                case 'pmi': updatePmiChart(period); break;
                case 'dxy': updateDxyChart(period); break;
                case 'cnMacro': updateCnMacroChart(period); break;
                case 'pe': updatePeChart(period); break;
                case 'overlay': updateOverlayChart(period); break;
            }
        }

        function initCharts() {
            const chartIds = ['usGdpChart', 'usFedChart', 'pmiChart', 'dxyChart', 'cnMacroChart', 'peChart', 'percentileChart', 'overlayAnalysisChart', 'inventoryCycleChart', 'creditCycleChart', 'dollarCycleChart', 'kondratievChart'];
            chartIds.forEach(id => {
                const el = document.getElementById(id);
                if (el) { charts[id] = echarts.init(el); }
            });
            window.addEventListener('resize', () => { Object.values(charts).forEach(chart => chart && chart.resize()); });
        }

        function loadData() {
            generate100YearData();
            generateCycleData();
            generateStockData();
            updateAllDisplays();
        }

        function generate100YearData() {
            const now = new Date();
            const startYear = now.getFullYear() - 100;
            macroData.GDP = generateLongTermData('GDP', startYear, now.getFullYear(), 'quarterly');
            macroData.CPIAUCSL = generateLongTermData('CPI', startYear, now.getFullYear(), 'monthly');
            macroData.UNRATE = generateLongTermData('UNRATE', startYear, now.getFullYear(), 'monthly');
            macroData.FEDFUNDS = generateLongTermData('FEDFUNDS', startYear, now.getFullYear(), 'monthly');
            macroData.MANEMP = generateLongTermData('PMI', startYear, now.getFullYear(), 'monthly');
            macroData.PPIACO = generateLongTermData('PPI', startYear, now.getFullYear(), 'monthly');
            macroData.DTWEXB = generateLongTermData('DXY', startYear, now.getFullYear(), 'daily');
            const cnStartYear = 1985;
            macroData.CHINA_GDP = generateChinaLongTermData('GDP', cnStartYear, now.getFullYear());
            macroData.CHINA_CPI = generateChinaLongTermData('CPI', cnStartYear, now.getFullYear());
            macroData.CHINA_PMI = generateChinaLongTermData('PMI', cnStartYear, now.getFullYear());
            macroData.CNY_RATE = generateChinaLongTermData('CNY', cnStartYear, now.getFullYear());
            macroData.CHINA_PPI = generateChinaLongTermData('PPI', cnStartYear, now.getFullYear());
            macroData.EXPORT = generateChinaLongTermData('EXPORT', cnStartYear, now.getFullYear());
            macroData.PE_HISTORY = generatePeHistoryData(now.getFullYear() - 50, now.getFullYear());
        }

        function generateLongTermData(type, startYear, endYear, frequency) {
            const data = [];
            const configs = {
                GDP: { base: 26.95, vol: 0.15, trend: 0.025 },
                CPI: { base: 310, vol: 2, trend: 0.035 },
                UNRATE: { base: 3.7, vol: 0.3, trend: 0 },
                FEDFUNDS: { base: 5.33, vol: 0.35, trend: -0.015 },
                PMI: { base: 49.1, vol: 2.5, trend: 0 },
                PPI: { base: 280, vol: 5, trend: 0.025 },
                DXY: { base: 103.5, vol: 1.5, trend: 0 }
            };
            const config = configs[type] || { base: 100, vol: 1, trend: 0 };
            let value = config.base;
            for (let year = startYear; year <= endYear; year++) {
                for (let quarter = 0; quarter < 4; quarter++) {
                    if (frequency === 'quarterly' || (frequency === 'monthly' && quarter === 0) || (frequency === 'daily' && quarter === 0)) {
                        const date = new Date(year, quarter * 3 + 1, 1);
                        const trendFactor = config.trend * (year - startYear) / 100;
                        const cyclePhase = (year - startYear) * Math.PI / 10;
                        const cycleFactor = Math.sin(cyclePhase) * config.vol * 0.3;
                        const randomFactor = (Math.random() - 0.5) * config.vol * 0.2;
                        value = config.base * (1 + trendFactor) + cycleFactor + randomFactor;
                        value = Math.max(0, parseFloat(value.toFixed(2)));
                        if (frequency === 'daily') {
                            for (let month = 0; month < 12; month++) {
                                const dayCount = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
                                for (let day = 1; day <= Math.min(dayCount, 10); day++) {
                                    const dateStr = new Date(year, month, day).toISOString().split('T')[0];
                                    data.push({ date: dateStr, value: parseFloat((value + (Math.random() - 0.5) * 0.5).toFixed(2)) });
                                }
                            }
                        } else {
                            data.push({ date: date.toISOString().split('T')[0], value: value });
                        }
                    }
                }
            }
            return data;
        }

        function generateChinaLongTermData(name, startYear, endYear) {
            const data = [];
            const configs = {
                GDP: { base: 10, vol: 0.02, trend: -0.03 },
                CPI: { base: 3, vol: 0.02, trend: 0 },
                PMI: { base: 50, vol: 0.03, trend: 0 },
                CNY: { base: 6.5, vol: 0.015, trend: 0.02 },
                PPI: { base: 4, vol: 0.03, trend: -0.02 },
                EXPORT: { base: 1000, vol: 0.04, trend: 0.08 }
            };
            const config = configs[name] || { base: 100, vol: 0.02, trend: 0.05 };
            let value = config.base;
            for (let year = startYear; year <= endYear; year++) {
                for (let quarter = 1; quarter <= 4; quarter++) {
                    value = value * (1 + config.trend) + (Math.random() - 0.5) * config.vol;
                    if ((year === 2008 || year === 2009) && config.base > 5) value *= 0.9;
                    if (year === 2020 && config.base > 5) value *= 0.95;
                    data.push({ date: `${year}-Q${quarter}`, value: Math.max(value, 0.1) });
                }
            }
            return data;
        }

        function generatePeHistoryData(startYear, endYear) {
            const data = [];
            for (let year = startYear; year <= endYear; year++) {
                let basePe = 17;
                if (year >= 1995 && year <= 2000) basePe = 25 + (year - 1995) * 4;
                else if (year >= 2001 && year <= 2003) basePe = 40 - (year - 2001) * 10;
                else if (year >= 2007 && year <= 2008) basePe = 22 - (year - 2007) * 3;
                else if (year >= 2009 && year <= 2019) basePe = 18 + (year - 2009) * 0.5;
                else if (year >= 2020 && year <= 2021) basePe = 22 + (year - 2020) * 2;
                else basePe = 20 + (Math.random() - 0.5) * 4;
                for (let q = 0; q < 4; q++) {
                    const value = basePe + (Math.random() - 0.5) * 3;
                    const date = new Date(year, q * 3 + 1, 1);
                    data.push({ date: date.toISOString().split('T')[0], value: parseFloat(value.toFixed(1)) });
                }
            }
            return data;
        }

        function generateCycleData() {
            const now = new Date();
            const startYear = now.getFullYear() - 20;
            macroData.INVENTORY_CYCLE = [];
            const inventoryPhases = ['è¢«åŠ¨å»åº“å­˜', 'ä¸»åŠ¨è¡¥åº“å­˜', 'è¢«åŠ¨è¡¥åº“å­˜', 'ä¸»åŠ¨å»åº“å­˜'];
            for (let i = 0; i < 80; i++) {
                const year = startYear + Math.floor(i / 4);
                const quarter = (i % 4) + 1;
                const value = Math.sin(i * Math.PI / 4) * 50 + 50;
                macroData.INVENTORY_CYCLE.push({ date: `${year}-Q${quarter}`, value: value, phase: inventoryPhases[i % 4] });
            }
            macroData.CREDIT_CYCLE = [];
            for (let i = 0; i < 240; i++) {
                const date = new Date();
                date.setMonth(date.getMonth() - 240 + i);
                const value = Math.sin(i * Math.PI / 24) * 2 + 10.5;
                macroData.CREDIT_CYCLE.push({ date: date.toISOString().split('T')[0], value: value });
            }
            macroData.DOLLAR_CYCLE = [];
            for (let i = 0; i < 480; i++) {
                const date = new Date();
                date.setMonth(date.getMonth() - 480 + i);
                const value = Math.sin(i * Math.PI / 90) * 15 + 90;
                macroData.DOLLAR_CYCLE.push({ date: date.toISOString().split('T')[0], value: value });
            }
            macroData.KONDRATIEV = [];
            for (let i = 0; i < 120; i++) {
                const year = 1920 + i * 0.5;
                const phase = Math.sin(i * Math.PI / 27);
                macroData.KONDRATIEV.push({ date: Math.floor(year).toString(), value: phase * 50 + 50 });
            }
        }

        function generateStockData() {
            const prices = { 'AAPL': 185.50, 'MSFT': 378.90, 'GOOGL': 141.80, 'AMZN': 178.25, 'NVDA': 495.20, 'META': 505.75, 'TSLA': 248.50, '600519.SS': 1700.00, '601398.SS': 5.80, '601288.SS': 4.20, '601988.SS': 3.80, '600036.SS': 35.50 };
            const names = { 'AAPL': 'Apple Inc.', 'MSFT': 'Microsoft', 'GOOGL': 'Alphabet', 'AMZN': 'Amazon', 'NVDA': 'NVIDIA', 'META': 'Meta Platforms', 'TSLA': 'Tesla', '600519.SS': 'è´µå·èŒ…å°', '601398.SS': 'å·¥å•†é“¶è¡Œ', '601288.SS': 'å†œä¸šé“¶è¡Œ', '601988.SS': 'ä¸­å›½é“¶è¡Œ', '600036.SS': 'æ‹›å•†é“¶è¡Œ' };
            Object.keys(prices).forEach(symbol => {
                const basePrice = prices[symbol];
                const prices_history = [];
                let price = basePrice * 0.6;
                const now = new Date();
                for (let i = 365; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    if (date.getDay() !== 0 && date.getDay() !== 6) {
                        price = price * (1 + (Math.random() - 0.48) * 0.02);
                        prices_history.push({ date: date.toISOString().split('T')[0], close: parseFloat(price.toFixed(2)) });
                    }
                }
                const currentPrice = prices_history[prices_history.length - 1].close;
                const prevClose = prices_history[prices_history.length - 2].close;
                const change = ((currentPrice - prevClose) / prevClose * 100);
                stockData[symbol] = { name: names[symbol], price: currentPrice, change: change, history: prices_history, pattern: detectPattern(prices_history) };
            });
        }

        function detectPattern(history) {
            if (!history || history.length < 60) return { type: 'hold', label: 'è§‚æœ›' };
            const recent = history.slice(-30);
            const highs = recent.map(d => d.close);
            const max = Math.max(...highs);
            const min = Math.min(...highs);
            const depth = (max - min) / max;
            const trend = (recent[recent.length - 1].close - recent[0].close) / recent[0].close;
            if (depth > 0.15 && depth < 0.35 && trend > 0.05) return { type: 'buy', label: 'ä¹°å…¥ä¿¡å·' };
            else if (trend > 0.02) return { type: 'hold', label: 'æŒæœ‰' };
            else return { type: 'sell', label: 'è§‚æœ›' };
        }

        function updateAllDisplays() {
            updateMacroStats();
            updateStockDisplays();
            updateEconomyTables();
            updateValuationData();
            updateAllCharts();
            updateCycleCharts();
        }

        function updateMacroStats() {
            updateMetric('usGdp', 'GDP', 'ä¸‡äº¿ç¾å…ƒ', 2);
            updateMetric('usCpi', 'CPIAUCSL', '%', 1);
            updateMetric('usFedRate', 'FEDFUNDS', '%', 2);
            updateMetric('usUnemployment', 'UNRATE', '%', 1);
            updateMetric('cnGdp', 'CHINA_GDP', '%', 1);
            updateMetric('cnCpi', 'CHINA_CPI', '%', 1);
            updateMetric('cnyRate', 'CNY_RATE', '', 2);
            updateMetric('cnPmi', 'CHINA_PMI', '', 1);
        }

        function updateMetric(prefix, key, unit, decimals) {
            const data = macroData[key];
            if (!data || data.length < 2) return;
            const current = data[data.length - 1];
            const previous = data[data.length - 2];
            const mom = ((current.value - previous.value) / previous.value * 100).toFixed(2);
            document.getElementById(prefix).innerHTML = current.value.toFixed(decimals) + (unit ? `<span class="metric-unit">${unit}</span>` : '');
            document.getElementById(prefix + 'Change').innerHTML = `<span class="metric-arrow ${parseFloat(mom) >= 0 ? 'up' : 'down'}">${parseFloat(mom) >= 0 ? 'â†‘' : 'â†“'}</span> ${Math.abs(mom)}%`;
        }

        function updateStockDisplays() {
            const previewHtml = Object.keys(stockData).slice(0, 8).map(symbol => {
                const stock = stockData[symbol];
                const changeClass = stock.change >= 0 ? 'up' : 'down';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                return `<div class="stock-card"><div class="stock-symbol">${symbol}</div><div class="stock-name">${stock.name}</div><div class="stock-price">${stock.price.toFixed(2)}</div><div class="stock-change ${changeClass}">${changeSymbol}${stock.change.toFixed(2)}%</div><div class="stock-pattern pattern-${stock.pattern.type}">${stock.pattern.label}</div></div>`;
            }).join('');
            document.getElementById('stockPreview').innerHTML = previewHtml;
            document.getElementById('nasdaqStocks').innerHTML = Object.keys(stockData).filter(s => !s.includes('.SS')).slice(0, 10).map(symbol => {
                const stock = stockData[symbol];
                const changeClass = stock.change >= 0 ? 'up' : 'down';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                return `<div class="stock-card"><div class="stock-symbol">${symbol}</div><div class="stock-name">${stock.name}</div><div class="stock-price">${stock.price.toFixed(2)}</div><div class="stock-change ${changeClass}">${changeSymbol}${stock.change.toFixed(2)}%</div><div class="stock-pattern pattern-${stock.pattern.type}">${stock.pattern.label}</div></div>`;
            }).join('');
            document.getElementById('a50Stocks').innerHTML = Object.keys(stockData).filter(s => s.includes('.SS')).map(symbol => {
                const stock = stockData[symbol];
                const changeClass = stock.change >= 0 ? 'up' : 'down';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                return `<div class="stock-card"><div class="stock-symbol">${symbol.replace('.SS', '')}</div><div class="stock-name">${stock.name}</div><div class="stock-price">${stock.price.toFixed(2)}</div><div class="stock-change ${changeClass}">${changeSymbol}${stock.change.toFixed(2)}%</div><div class="stock-pattern pattern-${stock.pattern.type}">${stock.pattern.label}</div></div>`;
            }).join('');
        }

        function updateEconomyTables() {
            const usItems = [{ key: 'GDP', name: 'ç¾å›½GDPç¯æ¯”æŠ˜å¹´ç‡', unit: 'ä¸‡äº¿ç¾å…ƒ', freq: 'å­£åº¦' }, { key: 'CPIAUCSL', name: 'ç¾å›½CPIåŒæ¯”', unit: '%', freq: 'æœˆåº¦' }, { key: 'FEDFUNDS', name: 'è”é‚¦åŸºé‡‘åˆ©ç‡', unit: '%', freq: 'æœˆåº¦' }, { key: 'UNRATE', name: 'ç¾å›½å¤±ä¸šç‡', unit: '%', freq: 'æœˆåº¦' }, { key: 'MANEMP', name: 'ç¾å›½åˆ¶é€ ä¸šPMI', unit: '', freq: 'æœˆåº¦' }, { key: 'PPIACO', name: 'ç¾å›½PPIåŒæ¯”', unit: '%', freq: 'æœˆåº¦' }, { key: 'DTWEXB', name: 'ç¾å…ƒæŒ‡æ•°', unit: '', freq: 'æ—¥åº¦' }];
            document.getElementById('usEconomyTable').innerHTML = usItems.map(item => {
                const data = macroData[item.key];
                if (!data || data.length < 2) return '';
                const current = data[data.length - 1];
                const previous = data[data.length - 2];
                const mom = ((current.value - previous.value) / previous.value * 100).toFixed(2);
                return `<tr><td><strong>${item.name}</strong></td><td class="num">${current.value.toFixed(2)}${item.unit}</td><td class="num">${previous.value.toFixed(2)}${item.unit}</td><td class="num ${parseFloat(mom) >= 0 ? 'up' : 'down'}">${parseFloat(mom) >= 0 ? '+' : ''}${mom}%</td><td class="num">--</td><td>${item.freq}</td><td>${current.date}</td></tr>`;
            }).join('');
            const cnItems = [{ key: 'CHINA_GDP', name: 'ä¸­å›½GDPåŒæ¯”', unit: '%', freq: 'å­£åº¦' }, { key: 'CHINA_CPI', name: 'ä¸­å›½CPIåŒæ¯”', unit: '%', freq: 'æœˆåº¦' }, { key: 'CHINA_PMI', name: 'ä¸­å›½åˆ¶é€ ä¸šPMI', unit: '', freq: 'æœˆåº¦' }, { key: 'CNY_RATE', name: 'äººæ°‘å¸æ±‡ç‡', unit: 'CNY/USD', freq: 'æ—¥åº¦' }, { key: 'CHINA_PPI', name: 'ä¸­å›½PPIåŒæ¯”', unit: '%', freq: 'æœˆåº¦' }, { key: 'EXPORT', name: 'ä¸­å›½å‡ºå£é‡‘é¢', unit: 'äº¿ç¾å…ƒ', freq: 'æœˆåº¦' }];
            document.getElementById('cnEconomyTable').innerHTML = cnItems.map(item => {
                const data = macroData[item.key];
                if (!data || data.length < 2) return '';
                const current = data[data.length - 1];
                const previous = data[data.length - 2];
                const mom = ((current.value - previous.value) / previous.value * 100).toFixed(2);
                return `<tr><td><strong>${item.name}</strong></td><td class="num">${current.value.toFixed(2)}${item.unit}</td><td class="num">${previous.value.toFixed(2)}${item.unit}</td><td class="num ${parseFloat(mom) >= 0 ? 'up' : 'down'}">${parseFloat(mom) >= 0 ? '+' : ''}${mom}%</td><td class="num">--</td><td>${item.freq}</td><td>${current.date}</td></tr>`;
            }).join('');
        }

        function updateValuationData() {
            document.getElementById('peValue').textContent = '25.4';
            document.getElementById('pbValue').textContent = '4.2';
            document.getElementById('dividendValue').textContent = '1.8%';
            document.getElementById('capmValue').textContent = '10.5%';
            document.getElementById('scoreValue').textContent = '62';
            const valuationTable = document.getElementById('valuationTable');
            const valuationData = [{ name: 'æ ‡æ™®500', pe: 25.4, pb: 4.2, ps: 3.5, ev: 18.5, div: 1.3, roe: 16.5, status: 'åˆç†' }, { name: 'çº³æ–¯è¾¾å…‹100', pe: 32.5, pb: 8.2, ps: 6.8, ev: 25.3, div: 0.6, roe: 22.5, status: 'é«˜ä¼°' }, { name: 'æ²ªæ·±300', pe: 14.2, pb: 1.6, ps: 1.8, ev: 10.5, div: 2.5, roe: 11.2, status: 'ä½ä¼°' }, { name: 'åˆ›ä¸šæ¿æŒ‡', pe: 45.8, pb: 5.2, ps: 4.5, ev: 28.6, div: 0.8, roe: 12.8, status: 'é«˜ä¼°' }, { name: 'æ’ç”ŸæŒ‡æ•°', pe: 10.5, pb: 1.1, ps: 1.2, ev: 8.5, div: 3.8, roe: 10.5, status: 'ä½ä¼°' }];
            valuationTable.innerHTML = valuationData.map(v => `<tr><td><strong>${v.name}</strong></td><td class="num">${v.pe}</td><td class="num">${v.pb}</td><td class="num">${v.ps}</td><td class="num">${v.ev}</td><td class="num">${v.div}</td><td class="num">${v.roe}</td><td><span class="stock-pattern ${v.status === 'é«˜ä¼°' ? 'pattern-sell' : v.status === 'ä½ä¼°' ? 'pattern-buy' : 'pattern-hold'}">${v.status}</span></td></tr>`).join('');
        }

        function updateAllCharts() {
            updateUsGdpChart('10y');
            updateUsFedChart('10y');
            updatePmiChart('10y');
            updateDxyChart('10y');
            updateCnMacroChart('10y');
            updatePeChart('10y');
            updatePercentileChart();
            updateOverlayChart('10y');
        }

        function getDataByPeriod(data, period) {
            if (!data || data.length === 0) return [];
            const now = new Date();
            const periodDays = { '1y': 365, '5y': 1825, '10y': 3650, '30y': 10950, '50y': 18250 };
            const days = periodDays[period] || 3650;
            const cutoff = new Date(now.getTime() - days * 24 * 60 * 60 * 1000);
            return data.filter(d => new Date(d.date) >= cutoff);
        }

        function updateUsGdpChart(period) {
            if (!charts.usGdpChart) return;
            const gdp = getDataByPeriod(macroData.GDP, period);
            const cpi = getDataByPeriod(macroData.CPIAUCSL, period);
            if (gdp.length === 0) return;
            const dates = gdp.map(d => d.date);
            const gdpValues = gdp.map(d => d.value);
            const cpiValues = normalize(cpi.length > 0 ? cpi.map(d => d.value) : new Array(dates.length).fill(0));
            const minGDP = Math.floor(Math.min(...gdpValues));
            const maxGDP = Math.ceil(Math.max(...gdpValues));
            charts.usGdpChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: [{ type: 'value', name: 'GDPç¯æ¯”æŠ˜å¹´ç‡(%)', min: minGDP, max: maxGDP, axisLabel: { fontSize: 10, color: '#8888a0' } }, { type: 'value', show: false }],
                series: [{ type: 'line', smooth: true, data: gdpValues, lineStyle: { width: 2, color: '#3b82f6' }, areaStyle: { color: 'rgba(59, 130, 246, 0.1)' } }, { type: 'line', smooth: true, data: cpiValues, lineStyle: { width: 2, color: '#10b981', type: 'dashed' } }]
            }, true);
        }

        function updateUsFedChart(period) {
            if (!charts.usFedChart) return;
            const fed = getDataByPeriod(macroData.FEDFUNDS, period);
            const unemp = getDataByPeriod(macroData.UNRATE, period);
            if (fed.length === 0) return;
            const dates = fed.map(d => d.date);
            const fedValues = fed.map(d => d.value);
            const unempValues = unemp.length > 0 ? unemp.map(d => d.value) : new Array(dates.length).fill(0);
            const minFed = Math.floor(Math.min(...fedValues));
            const maxFed = Math.ceil(Math.max(...fedValues) + 1);
            const minUnemp = Math.floor(Math.min(...unempValues.filter(v => v > 0)));
            const maxUnemp = Math.ceil(Math.max(...unempValues.filter(v => v > 0)) + 1);
            charts.usFedChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: [{ type: 'value', name: 'è”é‚¦åˆ©ç‡(%)', min: minFed, max: maxFed, axisLabel: { fontSize: 10, color: '#8888a0' } }, { type: 'value', name: 'å¤±ä¸šç‡(%)', min: minUnemp, max: maxUnemp, axisLabel: { fontSize: 10, color: '#8888a0' } }],
                series: [{ type: 'line', smooth: true, data: fedValues, lineStyle: { width: 2, color: '#8b5cf6' }, areaStyle: { color: 'rgba(139, 92, 246, 0.1)' } }, { type: 'line', smooth: true, data: unempValues, lineStyle: { width: 2, color: '#ef4444', type: 'dashed' } }]
            }, true);
        }

        function updatePmiChart(period) {
            if (!charts.pmiChart) return;
            const pmi = getDataByPeriod(macroData.MANEMP, period);
            if (pmi.length === 0) return;
            const values = pmi.map(d => d.value);
            const dates = pmi.map(d => d.date);
            const minVal = Math.floor(Math.min(...values));
            const maxVal = Math.ceil(Math.max(...values));
            charts.pmiChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: { type: 'value', name: 'PMI', min: Math.max(0, minVal - 5), max: Math.min(100, maxVal + 5), axisLabel: { fontSize: 10, color: '#8888a0' } },
                series: [{ type: 'line', smooth: true, data: values, lineStyle: { width: 2, color: '#3b82f6' }, areaStyle: { color: 'rgba(59, 130, 246, 0.1)' }, markLine: { silent: true, data: [{ yAxis: 50, lineStyle: { color: '#10b981' } }] } }]
            }, true);
        }

        function updateDxyChart(period) {
            if (!charts.dxyChart) return;
            const dxy = getDataByPeriod(macroData.DTWEXB, period);
            if (dxy.length === 0) return;
            const values = dxy.map(d => d.value);
            const dates = dxy.map(d => d.date);
            const minVal = Math.floor(Math.min(...values));
            const maxVal = Math.ceil(Math.max(...values));
            charts.dxyChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: { type: 'value', name: 'ç¾å…ƒæŒ‡æ•°', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                series: [{ type: 'line', smooth: true, data: values, lineStyle: { width: 2, color: '#ef4444' }, areaStyle: { color: 'rgba(239, 68, 68, 0.1)' } }]
            }, true);
        }

        function updateCnMacroChart(period) {
            if (!charts.cnMacroChart) return;
            const pmi = getDataByPeriod(macroData.CHINA_PMI, period);
            const ppi = getDataByPeriod(macroData.CHINA_PPI, period);
            if (pmi.length === 0) return;
            const dates = pmi.map(d => d.date);
            const pmiValues = pmi.map(d => d.value);
            const ppiValues = normalize(ppi.length > 0 ? ppi.map(d => d.value) : new Array(dates.length).fill(0));
            charts.cnMacroChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '15%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: [{ type: 'value', name: 'PMI', min: 45, max: 55, axisLabel: { fontSize: 10, color: '#8888a0' } }, { show: false }],
                series: [{ type: 'line', smooth: true, data: pmiValues, lineStyle: { width: 2, color: '#ef4444' }, areaStyle: { color: 'rgba(239, 68, 68, 0.1)' }, markLine: { silent: true, data: [{ yAxis: 50, lineStyle: { color: '#10b981' } }] } }, { type: 'line', smooth: true, data: ppiValues, lineStyle: { width: 2, color: '#f59e0b', type: 'dashed' } }]
            }, true);
        }

        function updatePeChart(period) {
            if (!charts.peChart) return;
            const peData = getDataByPeriod(macroData.PE_HISTORY, period);
            const years = peData.map(d => d.date);
            const peValues = peData.map(d => d.value);
            const avgValues = years.map(() => 22.3);
            const minVal = Math.floor(Math.min(...peValues));
            const maxVal = Math.ceil(Math.max(...peValues));
            charts.peChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: years, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(years.length / 10) - 1 } },
                yAxis: { type: 'value', name: 'PE', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                series: [{ type: 'line', smooth: true, data: peValues, lineStyle: { width: 2, color: '#4f46e5' }, areaStyle: { color: 'rgba(79, 70, 229, 0.1)' } }, { type: 'line', data: avgValues, lineStyle: { width: 2, color: '#8888a0', type: 'dashed' } }]
            }, true);
        }

        function updatePercentileChart() {
            if (!charts.percentileChart) return;
            const data = [{ name: 'PE', value: 62 }, { name: 'PB', value: 58 }, { name: 'PS', value: 72 }, { name: 'EV/EBITDA', value: 65 }];
            charts.percentileChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '15%' },
                xAxis: { type: 'category', data: data.map(d => d.name), axisLabel: { fontSize: 10, color: '#8888a0' } },
                yAxis: { type: 'value', max: 100, axisLabel: { fontSize: 10, color: '#8888a0' } },
                series: [{ type: 'bar', data: data.map(d => ({ value: d.value, itemStyle: { color: d.value > 70 ? '#ef4444' : d.value < 30 ? '#10b981' : '#f59e0b', borderRadius: [4, 4, 0, 0] } })), barWidth: '50%' } }]
            }, true);
        }

        function updateOverlayChart(period) {
            if (!charts.overlayAnalysisChart) return;
            const sp500 = [];
            const fedRate = [];
            const now = new Date();
            const periodDays = { '1y': 365, '5y': 1825, '10y': 3650, '30y': 10950, '50y': 18250 };
            const days = periodDays[period] || 3650;
            let sp = 4000;
            let rate = 5.33;
            for (let i = days; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                if (date.getDay() !== 0 && date.getDay() !== 6) {
                    sp = sp * (1 + (Math.random() - 0.48) * 0.02);
                    rate = rate * (1 - 0.005) + (Math.random() - 0.5) * 0.15;
                    rate = Math.max(3, Math.min(6, rate));
                    sp500.push({ date: date.toISOString().split('T')[0], value: sp });
                    fedRate.push({ date: date.toISOString().split('T')[0], value: rate });
                }
            }
            const dates = sp500.map(d => d.date);
            const spValues = normalize(sp500.map(d => d.value));
            const rateValues = normalize(fedRate.map(d => d.value));
            charts.overlayAnalysisChart.setOption({
                tooltip: { trigger: 'axis' },
                grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: Math.ceil(dates.length / 10) - 1 } },
                yAxis: [{ type: 'value', name: 'æ ‡æ™®500', axisLabel: { fontSize: 10, color: '#8888a0' } }, { type: 'value', show: false }],
                series: [{ type: 'line', smooth: true, data: spValues, lineStyle: { width: 2, color: '#3b82f6' }, areaStyle: { color: 'rgba(59, 130, 246, 0.1)' }, name: 'æ ‡æ™®500' }, { type: 'line', smooth: true, data: rateValues, lineStyle: { width: 2, color: '#ef4444', type: 'dashed' }, name: 'è”é‚¦åˆ©ç‡' }]
            }, true);
        }

        function updateCycleCharts() {
            if (charts.inventoryCycleChart) {
                const data = macroData.INVENTORY_CYCLE || [];
                const dates = data.map(d => d.date);
                const values = data.map(d => d.value);
                const minVal = Math.floor(Math.min(...values));
                const maxVal = Math.ceil(Math.max(...values));
                charts.inventoryCycleChart.setOption({
                    tooltip: { trigger: 'axis', formatter: function(params) {
                        const idx = params[0].dataIndex;
                        const phase = data[idx]?.phase || '';
                        return `${params[0].name}<br/>åº“å­˜æŒ‡æ•°: ${params[0].value.toFixed(2)}<br/>å‘¨æœŸé˜¶æ®µ: ${phase}`;
                    }},
                    grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                    dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                    xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: 'auto' } },
                    yAxis: { type: 'value', name: 'åº“å­˜æŒ‡æ•°', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                    series: [{ type: 'line', smooth: true, data: values, lineStyle: { width: 2, color: '#4f46e5' }, areaStyle: { color: 'rgba(79, 70, 229, 0.1)' }, markLine: { silent: true, data: [{ yAxis: 50, lineStyle: { color: '#10b981' }, label: { formatter: 'æ‰©å¼ /æ”¶ç¼©åˆ†ç•Œ', position: 'end' } }, { yAxis: 30, lineStyle: { color: '#f59e0b', type: 'dashed' }, label: { formatter: 'ä½ä½é¢„è­¦', position: 'end' } }, { yAxis: 70, lineStyle: { color: '#f59e0b', type: 'dashed' }, label: { formatter: 'é«˜ä½é£é™©', position: 'end' } }] } }]
                });
            }
            if (charts.creditCycleChart) {
                const data = macroData.CREDIT_CYCLE || [];
                const dates = data.map(d => d.date);
                const values = data.map(d => d.value);
                const recentValues = values.slice(-60);
                const minVal = Math.floor(Math.min(...recentValues)) - 1;
                const maxVal = Math.ceil(Math.max(...recentValues)) + 1;
                charts.creditCycleChart.setOption({
                    tooltip: { trigger: 'axis' },
                    grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                    dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                    xAxis: { type: 'category', data: dates.slice(-60), axisLabel: { fontSize: 10, color: '#8888a0', interval: 9 } },
                    yAxis: { type: 'value', name: 'M2åŒæ¯”(%)', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                    series: [{ type: 'line', smooth: true, data: recentValues, lineStyle: { width: 2, color: '#ef4444' }, areaStyle: { color: 'rgba(239, 68, 68, 0.1)' }, markLine: { silent: true, data: [{ yAxis: 10.5, lineStyle: { color: '#10b981' }, label: { formatter: 'å‡å€¼ 10.5%', position: 'end' } }] } }]
                });
            }
            if (charts.dollarCycleChart) {
                const data = macroData.DOLLAR_CYCLE || [];
                const dates = data.map(d => d.date);
                const values = data.map(d => d.value);
                const minVal = Math.floor(Math.min(...values));
                const maxVal = Math.ceil(Math.max(...values));
                charts.dollarCycleChart.setOption({
                    tooltip: { trigger: 'axis' },
                    grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                    dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                    xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: 59 } },
                    yAxis: { type: 'value', name: 'ç¾å…ƒæŒ‡æ•°', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                    series: [{ type: 'line', smooth: true, data: values, lineStyle: { width: 2, color: '#f59e0b' }, areaStyle: { color: 'rgba(245, 158, 11, 0.1)' }, markLine: { silent: true, data: [{ yAxis: 90, lineStyle: { color: '#10b981' }, label: { formatter: 'é•¿æœŸå‡å€¼', position: 'end' } }, { yAxis: 110, lineStyle: { color: '#ef4444', type: 'dashed' }, label: { formatter: 'å†å²é«˜ç‚¹', position: 'end' } }] } }]
                });
            }
            if (charts.kondratievChart) {
                const data = macroData.KONDRATIEV || [];
                const dates = data.map(d => d.date);
                const values = data.map(d => d.value);
                const minVal = Math.floor(Math.min(...values));
                const maxVal = Math.ceil(Math.max(...values));
                charts.kondratievChart.setOption({
                    tooltip: { trigger: 'axis' },
                    grid: { left: '12%', right: '8%', top: '10%', bottom: '20%' },
                    dataZoom: [{ type: 'inside', start: 0, end: 100 }, { type: 'slider', start: 0, end: 100, height: 20 }],
                    xAxis: { type: 'category', data: dates, axisLabel: { fontSize: 10, color: '#8888a0', interval: 19 } },
                    yAxis: { type: 'value', name: 'å‘¨æœŸä½ç½®', min: minVal, max: maxVal, axisLabel: { fontSize: 10, color: '#8888a0' } },
                    series: [{ type: 'line', smooth: true, data: values, lineStyle: { width: 3, color: '#3b82f6' }, areaStyle: { color: 'rgba(59, 130, 246, 0.15)' }, markArea: { silent: true, data: [[{ name: 'è§æ¡æœŸ', xAxis: '1980' }, { xAxis: '2000', itemStyle: { color: 'rgba(239,68,68,0.1)' } }], [{ name: 'å¤è‹æœŸ', xAxis: '2000' }, { xAxis: '2025', itemStyle: { color: 'rgba(245,158,11,0.1)' } }]] } }]
                });
            }
        }

        function normalize(data) {
            if (!data || data.length === 0) return [];
            const min = Math.min(...data);
            const max = Math.max(...data);
            const range = max - min || 1;
            return data.map(v => ((v - min) / range * 100));
        }

        function startUpdates() {
            updateIntervals.push(setInterval(() => {
                updateStockPrices();
                updateTime();
            }, 1000));
        }

        function updateStockPrices() {
            Object.keys(stockData).forEach(symbol => {
                const stock = stockData[symbol];
                const change = (Math.random() - 0.5) * 0.4;
                stock.change += change;
                stock.price *= (1 + change / 100);
                if (Math.random() > 0.98) { stock.pattern = detectPattern(stock.history); }
            });
            updateStockDisplays();
        }

        function updateTime() {
            const now = new Date();
            document.getElementById('updateTime').textContent = now.toLocaleTimeString('zh-CN', { hour12: false });
        }
    </script>
</body>
</html>
